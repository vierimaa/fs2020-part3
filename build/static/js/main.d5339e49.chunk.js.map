{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/PersonList.js","services/persons.js","components/Notification.js","App.js","index.js"],"names":["Filter","newSearch","onChange","value","PersonForm","addPerson","newName","handleNameChange","newNumber","handleNumberChange","onSubmit","type","Person","name","number","id","handleDeletePerson","key","onClick","PersonList","personsToShow","map","person","baseUrl","axios","get","then","response","data","newObject","post","put","delete","Notification","message","className","App","useState","persons","setPersons","setNewName","setNewNumber","setNewSearch","notificationMessage","setnotificationMessage","filter","toUpperCase","includes","useEffect","personService","initialPersons","console","log","handleCreatePerson","returnedPerson","concat","catch","error","handleNotification","setTimeout","event","target","preventDefault","existingPerson","undefined","updatedPersonObject","returnedUpdatedPerson","handleUpdatePerson","length","window","confirm","newPersons","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.d5339e49.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nconst Filter = ({ newSearch, onChange }) => {\r\n    return (\r\n        <div>\r\n            Search: <input value={newSearch} onChange={onChange} />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Filter;","import React from 'react';\r\n\r\nconst PersonForm = ({ addPerson, newName, handleNameChange, newNumber, handleNumberChange }) => {\r\n    return (\r\n        <form onSubmit={addPerson}>\r\n            <div>\r\n                Name: <input value={newName} onChange={handleNameChange} />\r\n            </div>\r\n            <div>\r\n                Number: <input value={newNumber} onChange={handleNumberChange} />\r\n            </div>\r\n            <div>\r\n                <button type=\"submit\">Add</button>\r\n            </div>\r\n      </form>\r\n    );\r\n};\r\n\r\nexport default PersonForm;","import React from 'react';\r\n\r\nconst Person = ({ name, number, id, handleDeletePerson }) => {\r\n    return (\r\n        <div>\r\n            {name} {number} <button key={id} onClick={() => handleDeletePerson(id, name)}>Delete</button>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst PersonList = ({ personsToShow, handleDeletePerson }) => {\r\n    return (\r\n        <div>\r\n            {personsToShow.map((person) => {\r\n                return(\r\n                    <Person key={person.id} name={person.name} number={person.number} id={person.id} handleDeletePerson={handleDeletePerson}/>\r\n                )\r\n            }\r\n            )}\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nexport default PersonList;","import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseUrl)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst create = newObject => {\r\n    const request = axios.post(baseUrl, newObject)\r\n    return request.then(response => response.data)\r\n}\r\n  \r\nconst update = (id, newObject) => {\r\n    const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst deletePerson = (id) => {\r\n    const request = axios.delete(`${baseUrl}/${id}`)\r\n    return request.then(response => response.data)\r\n}\r\n  \r\nexport default {  getAll, create, update, deletePerson }","import React from 'react';\r\n\r\nconst Notification = ({ message, type }) => {\r\n    \r\n    if (message === null) {\r\n      return null\r\n    }\r\n    \r\n    return (\r\n      <div className={type}>\r\n        {message}\r\n      </div>\r\n    )\r\n  }\r\n\r\nexport default Notification;","import React, { useState, useEffect } from 'react'\nimport Filter from './components/Filter'\nimport PersonForm from './components/PersonForm'\nimport PersonList from './components/PersonList'\nimport personService from './services/persons'\nimport Notification from './components/Notification'\n\nconst App = () => {\n  const [ persons, setPersons] = useState([])\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ newSearch, setNewSearch ] = useState('')\n  const [notificationMessage, setnotificationMessage] = useState({message: null, type: null})\n\n  const personsToShow = persons.filter(person => person.name.toUpperCase().includes(newSearch.toUpperCase()))\n\n  const handleNameChange = (event) => setNewName(event.target.value)\n  const handleNumberChange = (event) => setNewNumber(event.target.value)\n  const handleSearchChange = (event) => setNewSearch(event.target.value)\n\n  useEffect(() => {\n    personService\n    .getAll()\n      .then(initialPersons => {\n        console.log('initialPersons', initialPersons)\n        setPersons(initialPersons)\n      })\n  }, [])\n\n  const handleCreatePerson = (newName, newNumber) => {\n    const personObject = { name: newName, number: newNumber }\n    personService\n      .create(personObject)\n        .then(returnedPerson => {\n          setPersons(persons.concat(returnedPerson))\n          setNewName('')\n          setNewNumber('')\n        })\n        .catch(error => handleNotification(`${error.response.data.error}`, 'error'))\n  }\n\n  const handleUpdatePerson =  (existingPerson, newNumber) => {\n    const updatedPersonObject = { ...existingPerson, number: newNumber }\n    personService\n      .update(existingPerson.id, updatedPersonObject)\n      .then(returnedUpdatedPerson => {\n        setPersons(persons.map(person => person.id !== existingPerson.id ? person : returnedUpdatedPerson))\n        setNewName('')\n        setNewNumber('')\n      })\n      .catch(error => {\n        console.log('Update error', error)\n        handleNotification(`${existingPerson.name} was already deleted from the server.`, 'error')\n        setPersons(persons.filter(person => person.id !== existingPerson.id))\n      })\n  }\n\n  const handleDeletePerson = (id, name) => {\n    const result = window.confirm(`Do you really want to delete ${name}?`)\n    if (result){\n      console.log('handleDelete', id)\n      const newPersons = persons.filter(person => person.id !== id )\n      console.log('newPersons', newPersons)\n      personService\n      .deletePerson(id)\n        .then(setPersons(newPersons))\n        .catch(error => {\n          console.log('Delete error', error)\n          handleNotification(`${name} was already deleted from the server.`, 'error')\n          setPersons(persons.filter(person => person.id !== id))\n        })\n    } else {\n      console.log('Exited window confirm')\n    }\n  }\n\n  const handleNotification = (message, type) => {\n    setnotificationMessage({message: message, type: type})\n    setTimeout(() => setnotificationMessage({message: null, type: null}), 3000)\n  }\n\n  const addPerson = (event) => {\n    event.preventDefault()\n    const existingPerson = persons.filter(person => person.name === newName)[0]\n    console.log('existingPerson', existingPerson)\n    \n    if (existingPerson !== undefined && existingPerson.name === newName && existingPerson.number === newNumber){\n      handleNotification(`${newName} is already added to phonebook!`, 'error')\n    } else if (existingPerson !== undefined && existingPerson.name === newName && existingPerson.number !== newNumber) {\n      handleUpdatePerson(existingPerson, newNumber)\n      handleNotification(`${existingPerson.name} was updated in contacts.`, 'notification')\n    } else if (existingPerson === undefined && newName.length > 5 && newNumber.length > 8) {\n      handleCreatePerson(newName, newNumber)\n      handleNotification(`${newName} was added to contacts.`, 'notification')\n    } else {\n      handleCreatePerson(newName, newNumber)\n    }\n  }\n\n  return (\n    <div>\n      <h1>Phonebook</h1>\n      <Notification message={notificationMessage.message} type={notificationMessage.type} />\n      <Filter value={newSearch} onChange={handleSearchChange} />\n      <h3>Add new contact</h3>\n      <PersonForm addPerson={addPerson} newName={newName} handleNameChange={handleNameChange} newNumber={newNumber} handleNumberChange={handleNumberChange} />\n      <h3>Numbers</h3>\n      <PersonList personsToShow={personsToShow} handleDeletePerson={handleDeletePerson} />\n    </div>\n  )\n}\n\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport './index.css'\n\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n)"],"sourceRoot":""}